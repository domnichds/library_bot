# Бот библиотекарь

Асинхронный Telegram‑бот для электронного каталога — просмотр жанров/книг, выбор и скачивание форматов, плюс возможность задать вопрос по книге нейросети (Yandex GPT).

Содержание
- [Краткий функционал бота](#краткий-функционал-бота)
- [Стек технологий](#стек-технологий)
- [Схема хранения книг](#схема-хранения-книг)
- [Установка и запуск](#установка-и-запуск)
- [Автор](#автор)

---

## Краткий функционал бота
- Просмотр жанров и списка книг с пагинацией.  
- Поиск по названию / автору.  
- Просмотр доступных форматов книги и скачивание.  
- Кнопка «❓ Спросить у Yandex GPT» — отправка вопроса в LLM.  
- Дневной лимит запросов на пользователя (контролируется в БД).

## Стек технологий
- Python 3.10+  
- aiogram  
- SQLAlchemy + MySQL  
- aiomysql  
- aiohttp  
- python-dotenv

## Схема хранения книг
- Файлы книг хранятся в корне бота в каталоге `/storage/`.  
- Внутри `/storage/` находятся папки с жанрами (см. доступные жанры в `config/storage.py`).  
- В каждой папке книга имеет имя в формате `Название - автор.формат`.  
- `services/file_sync.py` автоматически подтягивает все книги из папок в БД.

## Установка и запуск
1. Клонировать:
```bash
git clone https://github.com/domnichds/library_bot.git
cd library_bot
```
2. Виртуальное окружение:
```bash
python -m venv .venv
source .venv/bin/activate        # Linux/macOS
.\.venv\Scripts\Activate.ps1     # Windows PowerShell
```
3. Установить зависимости:
```bash
pip install -r requirements.txt
```
4. Создать `.env` в корне:
```
BOT_TOKEN=...
DATABASE_URL=mysql+aiomysql://dbuser:password@HOST:3306/library_bot
LLM_API_KEY=...
LLM_FOLDER_ID=...
LLM_URL=...
```
5. Запустить:
```bash
python -m app.main
```
(Запуск через `-m` гарантирует корректные импорты `from app...`. При старте выполняется `init_db()`.)

## Автор
- Домнич Данил — https://github.com/domnichds

--- 
